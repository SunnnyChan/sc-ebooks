# 什么是去中心化的应用？

## 什么是 比特币
* 比特币对互联网协议层的拓展
```md
传统互联网协议套件良好的通信标准：
链路层将一些数据放在电线上；
网络层对数据进行路由；
传输层将数据持久化；
应用层以应用的形式提供数据抽象。

4个协议层在数据交换上的合作天衣无缝，但可惜它们交换的不是价值。
对于价值而言，比特币充当了4层之上的第5个协议层。
```
* 比特币支付
```md
当前在web上支付的方法，无一例外的跟效率低下的遗留系统绑定在一起。
比如在互联网出现之前设计的自动清算系统（ACH，automated cleaning house）。
这些传统的支付系统需要依赖集中式的清算系统，因此慢的让人难以忍受。

机器不应该为了清算一笔支付登上好几天，应该有能力将数十亿的小额支付发送给对方，
以计量电力和存储空间等资源，并且无需负担高额的中间商交易费用。
比特币解决了这个问题。

即时、去中心化、匿名的价值转移随着比特币的出现终于变成现实。
```
* 拜占庭将军问题
```md
拜占庭将军问题是困扰密码研究几十年的问题：
（假设）拜占庭军队的一些将军率队在敌人的城市里安营扎寨。
他们之间只能依靠信使通信，而且必须在作战计划上达成一致。
然后他们中间有可能存在一个或几个想要迷惑其他人的叛徒。
那么需要解决的问题是：
找到一种算法来确保忠诚的将军能达成一致的意见。

在比特币中达成去中心化的共识，意味着任何一方都无需信任参与信息分享的其他各方，
也无需通过一个中央权威来分享信息，其中包括以价值交易形态存在的信息。
```
* 传递价值
```md
比特币和其他“加密货币”将有助于定义互联网的第5层协议，让机器想传递数据那样快速有效的传递价值。
比特币是很有用的在线简直传递工具。
```
* 区块链
```md
比特币最有价值的贡献是其革新性的底层技术：区块链。
区块链首次将去中心化共识变成现实。

区块链是对发生在比特币网络中的所有交易进行大规模复制的数据库。

* 工作量证明（proof-work）
区块链使用共识证明的共识机制，来防止双重消费（double-spenging）问题。
双重消费问题困扰了密码研究学者几十年，指的是可以对一次交易予以否认，
从而达到一笔资金重复使用的目的。

* 挖矿机（miner）
工作量证依靠在网络中引入 挖矿机 来解决双重消费问题，有其硬件进行加密。
挖矿机是验证交易的比特币网络节点，会通过自己的区块链历史来检查交易。

* 区块链历史
区块链历史包含所有曾经发生在网络中的交易，是一条有时间戳的记录。
从理论上讲，区块链历史可以修改，但因为有工作量证明，还需要使用网络上大部分计算力验证。
目前比特币网络拥有的计算力已经远超世界上所有超级计算机的计算力总和，
所以攻破比特币网络机器困难。
```
* 女巫攻击（Sybil attack）
```md
女巫攻击 是指坏人在网络中宣称有多个身份，并获取他们不应有的资源来攻击。
一次成功的女巫攻击极有可能导致比特币完全贬值，因为人们将不再相信其稳定性。

工作量证明是目前能够阻止女巫攻击的唯一机制，是唯一经过大规模验证的有效机制。
虽然从店里消耗和计算负载来看，工作量证明代价高昂。
```
## 什么是dapp
* 去中心化与分布式、集中式
```md
集中式系统是目前最流行的应用软件模型，它直接控制各个各个单元的操作，
并且信息流源自一个中心。
所有单元都要依靠中心点来发送和接受信息，以及接受命令。
主流互联网服务（Facebook、Google、Amazon）都采用这个模型，
我们将这些巨型服务称为“服务栈”。

集中式系统同时也可以是分布式的。
像Google这种的服务栈都在内部采用分布式架构。

去中心化系统也可以是分布式的。
比特币就是分布式的，它盖有时间戳的公共账目（区块链）就是驻留在多台计算机上的。
同时它也是去中心化的，因为如果某个节点失效了，整个网络还可以照常运行。
即任何使用区块链和其他端到端工具的应用都可以是分布式的去中心化的系统。
```
* 有去中心化共识是dapp的唯一要求？
```md
目前dapp领域是一片刚刚开始开垦的沃土，各种新的模型还在尝试。
对于什么是dapp，目前不同的开发人员会有不同的看法。

一些人认为只要没有导致整个系统失效的中心点就够了。
但也有人觉得需要加上其它要求。

* 能够盈利的dapp
盈利为 成功、健壮、可持续发展的dapp奠定了基石。
开发人员构建应用，用户保持忠诚，以及矿工维护区块链，都是靠激励措施维持的。
```

* 能够盈利的dapp的特性
* * 开源
```md
去中心化的闭源应用要求用户相信该应用的去中心化程度确如核心开发人员描述，
并且用户不会通过一个中心源来访问自己的数据。
因此会让用户望而却步，不敢使用。
而且对于会收取、持有和转移用户资金的应用，闭源更让人排斥。

开源dapp会改变它的商业行为结构，这样互联网才会变成共同点，而不是孤岛链。

* 开源的动力
比特币是一个很好的榜样，中本聪保留了最初的一部分比特币，然后让其他人使用其余部分。
因为数据量上的限制，并且比特币的工作量证明机制为社会提供了巨大的价值，
所以比特币的价值开始增长，从而为中本聪创造了财富。

通过开源吸引开发人员为其作为贡献，该应用达成了网络自行完善所需的透明性，
并且赢得了用户的信任。
```
* * “内部货币”
```md
集中式应用的传统赚钱模式包括 交易手续费、广告费、推荐佣金、访问用户数据的权力以及订阅服务。
这些商业模式在dapp中都不可行。

* 稀缺令牌
即App币，用来分配网络中的稀缺资源。用户如果想使用这个网络，就需要App币。
稀缺资源的所有者得到别人支付的App币。

在比特币网络中，稀缺资源（计算力）的拥有者（旷工）直接从用户那里获取交易手续费，
让他们使用自己提供的服务。
网络的增长会引入更多的用户，而App币的总额是固定的，所以App的价值会不断增长。

我们可以把这个模型应用到任何dapp上。
稀缺资源可以是 存储空间、交易、图片、视频、文本、广告等很多东西。

* 是否都需要付费
尽管区块链是需要支付才能使用的，但是在dapp内部可以构造不同的激励方式。
可以给用户App币作为注册奖励，甚至可以让用户通过出售自己的数据或本地存储空间来换取App币。

除了使用App币，dapp创建者还可以使用虚拟资产赚钱，就像去中心化的MMORPG中的不动产一样，
或者通过特殊命名空间中的领域，甚至是名声。
```
* * 去中心化共识
```md
* DHT 和 区块链
比特币是P2P的，P2P网络不是什么新的发明，BitTorrent之类的分布散列表（DHT）是在区块链之前发明的。
如果要存储和交互去中心化的数据，DHT很好用。
但如果想以一种去中心化的方式让所有人对用户名、状态更新、高分值等应用层面上的数据达成共识，需要区块链。

区块链并不会替代DHT，而是其必要的补充。
区块链如此特别，是因为它解决了DHT最主要的安全问题 ：
节点之间不需要在数据的有效性上相互信任。

区块链是一个去中心化的交易数据库，并且是第一个高度防篡改的去中心化数据库。
安全性是区块链主导性设计目标之一。
它是历史上第一个在组织上去中心化，在逻辑上集中的交易日志。

* * 去中心化共识
区块链的革新点在于去中心化的共识，如果你的应用中有个功能需要所有人共同承认某个东西，那应该用区块链。
以用户名系统为例：
用户名@user在谁的手里其实并不重要，真正重要的是让所有人都承认它就是那个人的。
区块链是不可变记录，每个节点存放一个副本，因此没有人能简装自己也是 @user，这可以用 智能合约 实现。

* * 智能合约
智能合约是区块链里的一段代码，当某个预先编写好的条件被触发时，智能合约就会执行相应的合约条款。
智能合约存放在区块链中，它不需要第三方信任。

智能合约正规的表达应该是：用经济的加密方式保证安全的代码块执行。

当然，并非所有的dapp都是 智能合约。
智能合约有自己特色的场景，可以说它就像MVC dapp 中的“Model”。
```
* * 没有中心失效点
```md
dapp是没有办法关闭的，因为根本没有服务器。dapp的数据是去中心化的存放在所有的节点上的，每个节点都是独立的。
如果一个节点失效，其它的还能在网络上运转。

* 去中心化的数据库系统
dapp 可以使用去中心化的数据库系统实现该特性，如 星际文件系统、BitTorrent和一些独立的DHT。
```
## dapp 历史
* Web 
```md
Web一开始是非常去中心化的，HTTP协议连接着全世界互联网设备。
在HTTP协议的指导方针中，有一组可信的DNS服务器。
HTTPS 加上了可信服务器和证书颁发这一层。

每个人都可以架设一台个人服务器供他人连接，而每个人拥有自己的数据。
```
* 集中式模型
```md
集中式模型的诞生主要是因为它容易实现，从概念和编程上来说都容易。
个人或群组负责服务器的维护成本，并从使用服务器上软件的用户那里获利。
MySpace 和 Yahoo 是第一批集中式应用的典型代表。

最近的应用 比如 Uber 和 AirBnb，
通过提供一个可信的集中式数据存储，把业务的“现实世界”部分去中心化了。
他们是第一批允许各方全部参与到一项赚钱事业中的商家。
这种去中心化的业务模型也为开发更多的dapp做好了铺垫。
```
* BitTorrent
```md
2003 Bram Cohen 发明的 BitTorrent 被开始推广。
BitTorrent协议创建的目的是解决HTTP协议下载大型媒体文件时间超长的问题，同时也是对之前 P2P 协议的改进。
BitTorrent 把下载者同时变为上传者。

下载的时候从多个数据源下载。文件越受欢迎，就会有越多的用户下载，也就有越多的用户上传。
这意味着，能从更多的源头来下载这个文件中的数据。数据源越多，下载越快。

给种子用户的回报是更快的下载速度，而对吸血用户的惩罚就是速度上的限制。
事实证明，这种“以牙还牙”的数据传输系统对电影和电视剧之类的大型文件特别好用。

BitTorrent 不断增长，称为 游戏 和电影等所有大型文件的下载方式。
BitTorrent 的速度、弹性和回报机制对于大数据集来说都要优于HTTP。

* 为什么 Web 不使用？
很可能是HTTP的先发优势，它的基础设施，以及已经投入其中的时间和金钱。
现在也有项目希望通过 类似 BitTorrent 的技术对HTTP进行升级，
他们很可能会成功，因为 BitTorrent 有着巨大的价值主张。

* 去中心化应用 和 BitTorrent
BitTorrent 刚一出现，开发者就开始使用这一技术创建去中心化的应用。
```
* dapp 举例
* * PopcornTime
```md
PopcornTime 使用 BitTorrent 协议实现用户间的实时视频流，有点像使用种子的 Netflix。
它是美国电影协会（MPAA）的噩梦，没有监管者能关掉它，现在所有人都能访问免费的电影。

因为 PopcornTime 没有使用 “内部货币”，并且不需要去中心化共识，所以没有用区块链。
它仅仅通过串流电影就提供了很大的价值。
```
* * OpenBazaar
```md
OpenBazaar 目标是成为去中心化的 eBay。
没有中间商能告诉销售商什么能卖，什么不能卖，也没有中间商能决定使用服务的费用。

它构建在BitTorrent协议上，但问题是销售商必须假设自己的店铺。
他们需要有自己的服务器并保持运行，以便用户能看到他们的商品。

在理想情况下，销售商只需要把店铺数据上传到网络上，还可能需要支付一笔费用，然后就不用管了。
这就要求有一个能够激励存储挖矿机的去中心化系统。

OpenBazaar 使用BitTorrent 传输数据，用比特币作为销售商之间的交易“货币”。
```
* * Lighthouse
```md
Lighthouse 是一个内嵌了一系列 智能合约 的比特币钱包，
这些智能合约就像Kickstarter 一样帮忙向某些项目认筹。
当项目达成时，它就能从项目支持者的 Lighthouse 钱包中取出资金。
认筹者可以随时撤销认筹，不需要项目创建者参与。

Lighthouse 是用现有的比特币基础设施构建自己的dapp的好例子。
它只用一个带有比特币智能合约的UI就做成了一个电子钱包。

此外，它运转良好，并且吸引了比特币现有的用户群。

Lighthouse 有去中心化的共识，是开源的，没有中心失效点，但它没有发行自己的 “货币”，而是使用比特币。
它是一个实用的dapp，但不能让创建者盈利。
```
* * Gems
```md
Gems 是一个社交消息应用，试图创建一个 比 WhatsApp 更加公平的业务模型。
Gems 发行了自己的“货币”，并且允许广告商直接向用户支付费用以访问其数据，而不是自己作为中间商盈利。
这种货币称为 “宝石”，是在比特币基础之上创建的元币。

用户吸引其他人加入网络能赚到“宝石”，开发人员在开发和维护这个软件时也能得到“宝石”。
用户也像开发人员一样受到激励，通过扩大网络来赚钱。

可以把“宝石”看成dapp 里的股份。

Gems 还没有开源，所以用户无法检查它是否真的没有中心失效点。
这是一个盈利的dapp，但我觉得它难以跟满足另外三个条件的竞争对手进行竞争。
```

* 有没有满足 “没有中心失效点” “发行自己的’内部货币‘” “有去中心化共识” “开源” 4个条件的dapp 吗？
```md
很多“加密货币” 是同时满足4个条件的，但是“加密货币”不是dapp。
这里说的是 社交网络、拼车、搜索引擎：去中心化的服务栈。
目前还没有dapp，但有这种可能性。

是要出现这样的dapp，就会有大量的开发人员走上这条路。
```
## 技术点
* 区块链
```md
区块链是最重要的技术点，它帮助解决了拜占庭问题：
如果在分布式节点之间进行协作，从而能够在攻击者试图搞破坏的情况下达成某种共识？

工作量证明算法和区块链帮助我们解决了这个问题。
```

* 权益证明
```md
工作量证明并不完美，它要消耗大量的计算力和电力。
还有其他可以解决有意义问题的“加密货币”，比如 PrimeCoin，它的挖矿机用自己的计算资源寻找素数。

再如 比特币的世界中，我们要耗费大量的能量来维护网络，而能量应该有更好的用途，
只是帮助网络维护其安全太浪费了。
但问题是，工作量证明是目前唯一能够防范女巫攻击的系统。
共识研究仍在继续，但目前最好的选择还是工作量证明。

“权益证明” 有可能成为工作量证明的最大对手。
但它目前并不完美，可以作为工作量证明的补充。

权益证明 是一种共识机制，依靠计算力防止对网络中的权益进行女巫攻击。
通常来说，权益是指矿工拥有的“加密货币”数额。
核心思想是 你拥有的 “加密货币” 越多，就会投入更多来确保网络的稳定性，也越不可能进行51%攻击来创建区块链分支。

* 代理式权益证明
一组101代理可以对区块产生者进行投票。
目前都还在研究中。
```
* 定义术语
* * 去中心化应用（decentralized application，DA）
```md
对于所有涉及软件的去中心化实体，去中心化应用是其超类。
```
* * DO 去中心化组织 （decentralized organization）
```md
DO 是给所有员工授权的组织。这个术语更多的是描述的结构层面。

完全去中心化的组织不一定是最好的方式，在传统的组织中，有严格的层级式的命令结构。

去中心化的组织会倾听员工的声音，并且权力是均分给每个人的，
每个人都可以审查公司的活动和里程碑，它们就存放在一个去中心化存储网络中，以便达到最佳的弹性。

不需要把人类当做唯一的决策者：
智能合约能够在某个日期担任诸如支付者的角色。

DO 不需要基于某座城市，可以遍布全球。

在某些系统中（比如比特币），共谋被视为bug，而在DO中，是一项功能。
得益于 Slack 和 Github的发展，最近有些创业公司采用了更加去中心化的结构。
```
* * AA 自动代理（automated agent）
```md
AA 不一定是指 SkyNet 或一些通用的人工智能。
自动代理至少已经存在10年了，无需人工干预运行的或者说自主运行的软件都是AA。

计算机病毒就是个完美的例子。
开发者制作并把它广泛发散出去之后，就由它来决定进行自我复制或执行已编码的任何其他维护算法。

守护程序是另外一个例子。

* 自动代理有利有弊
它们不需要任何维护，但未经检查的代理也可能成为人类难以控制的危险源。
```
* * DAO 去中心化自治组织 （decentralized autonomous organization）
```md
DAO 和 DO一样，只是由AI代替人类来做决定。
协议就在去中心化的栈中，并且不会听从任何法律约束。

人类不是主宰者，而是被边缘化了。AI来做决定，DAO自己来维护自己。
DAO是由AI控制决策的dapp，人类靠边站。
共谋不像在去中心化组织中呗当做功能，而是bug。
但并不是由AI做决定的就是DAO，它还需要有自己的内部资本。

比特币就是DAO的一个例子。
```
* * DAC 去中心化自治企业 （decentralized autonomous corporation）
```md
存在争议，因为有人认为企业是从受法律合同和层级集权控制的遗留系统中来的。
但这样的系统正是我们要努力演变的起点。

有人认为 DAC 是 DAO 的子类，将股息付给其成员。
```

![组织的类型](pic/d_organized_type.png)

```md
我们还没到能够制作AI（圣杯）的阶段，而是在可以开始制作DAO的进化阶段。
```
 
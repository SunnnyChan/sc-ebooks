# 用户行为数据分析概论

   * [用户行为数据分析概论](#用户行为数据分析概论)
      * [为什么要做用户行为分析?](#为什么要做用户行为分析)
         * [什么是用户行为？](#什么是用户行为)
         * [用户行为数据的行业意义](#用户行为数据的行业意义)
         * [用户行为数据的应用场景](#用户行为数据的应用场景)
      * [如何采集用户行为数据?](#如何采集用户行为数据)
         * [埋点采集数据](#埋点采集数据)
         * [无埋点采集数据](#无埋点采集数据)
            * [原理](#原理)
            * [技术优势](#技术优势)
         * [双模式数据采集方案](#双模式数据采集方案)
            * [“埋点 无埋点”的原理](#埋点无埋点的原理)
            * [优势](#优势)
      * [如何搭建数据指标体系?](#如何搭建数据指标体系)
         * [背景](#背景)
         * [「指标」是一种度量](#指标是一种度量)
         * [OSM 模型](#osm-模型)
            * [案例](#案例)
            * [OSM 模型的看板](#osm-模型的看板)
         * [数据指标分级体系](#数据指标分级体系)
            * [三个层级](#三个层级)
            * [GrowingIO 指标体系实践](#growingio-指标体系实践)
      * [怎么做用户行为数据分析](#怎么做用户行为数据分析)
         * [数据分析两大思路](#数据分析两大思路)
            * [五个基本步骤](#五个基本步骤)
            * [内外因素分解法](#内外因素分解法)
         * [数据分析的 8 种方法](#数据分析的-8-种方法)
            * [数字和趋势](#数字和趋势)
            * [维度分解](#维度分解)
            * [用户分群](#用户分群)
            * [转化漏斗](#转化漏斗)
            * [行为轨迹](#行为轨迹)
            * [留存分析](#留存分析)
            * [A/B 测试](#ab-测试)
            * [数学建模](#数学建模)

## 为什么要做用户行为分析?
* 单纯从数据组成的角度来说
* * 完善的闭环数据源
```text
第一 块是用户行为数据
第二块是用户信息 & CRM 数据
第三块是 Transaction (交易)数据和服务端日志数据
```

行为数据和日志数据很多时候都是近似的，完备的 用户行为数据基本能覆盖绝大多数的服务端日志数据，同时包含着很多日志 数据所缺乏的信息。

* 从技术发展角度来说
最近几年发展最快的可以说是前端，每个月都会有很 多新的东西出现，整体趋势是往单页应用发展，追求用户体验。
同时，还有 移动端应用，也在产生着大量的行为数据，这些都不会跟服务端有过多交 互。

### 什么是用户行为？
* 五元素
时间(when)、地点(where)、人 物(who)、交互(how)、交互的内容(what)
也就是说用户在什么 时间、什么地点以何种交互方式进行了某种操作。

“结果型”数据
“过程型”数据

### 用户行为数据的行业意义
分析的主要方式就是关注流失，尤其是对转化有要求的网站
用户行为数据分析帮助分析用户怎么流失、为什么流失、在哪里流失。

### 用户行为数据的应用场景
拉新，也就是获取新用户
转化，比如电商特别注重订单转化率
促活，如何让用户经常使用我们的产品
留存，提前发现可能流失用户，降低流失率
	用户流失不是说一下子就流失了，一些细微行为，就能预示他将来会流失。
变现，发现高价值用户，提高销售效率

## 如何采集用户行为数据?
### 埋点采集数据

Capture 模式

埋点采集数据的 7 个步骤

* 埋点采集数据的 4 个缺点
```text
依赖经验导向
	Capture 模式非常依赖人的经验和直觉
沟通成本高
	一个有效的分析结果，依赖于数据的完整性和完备性。
需大量时间做数据清洗
	由于需求的多变性、埋点分成多次加入、缺乏统筹设计和统一管理， 结果代码自然是无比混乱。
数据漏采错采
```

### 无埋点采集数据

Record 模式 : 是用机器来替代人的经验

#### 原理
* 从业务角度出发，划分为 5 种维度
```text
Who，行为背后的人具有哪些属 性
When，什么时候触发的这个行为
Where，城市地区浏览器甚至 GPS 等
What，也就是内容
How，是怎样完成的
```

对信息的解构，保证了数据从源头就是干净的，在此基础上面，我们完全可以把 ETL 自动化，需要什么数据可以随时回溯。

#### 技术优势

真正做到所见即 所得，不仅是 PC，它还支持 iOS、Android 和 Hybrid，可以进行跨屏的 用户分析。

加载了我们自己的监测代码后，无需一个一个写埋点代码，只需要用鼠标圈选对应元素，即可获得数据。

用户行为数据采集的目的是通过了解用户过去的行为，来预测未来发生的事 情
无需埋点，随时回溯数据，让一个人就可以搞定用户行为数据分析的全 部流程。
这样一个简单、迅速和规模化的数据分析产品，能极大地简化分析 流程，提高效率，直达业务。

### 双模式数据采集方案

能够采集到完整的用户行为数据和业务数据，而且 要把用户行为数据和业务数据打通。

#### “埋点+无埋点”的原理
电商 App 为例
	用户从 “打开 App” – “观看首屏广告” – “搜索关键词” – “进入结 果页” – “加入购物车” 再到 “支付完成”，  
    整个过程中既有用户行为数 据(过程型数据)，又有交易数据(结果型数据)。

#### 优势
* 为什么需要双模式？
无埋点的方法本身效率比较高，实践证明，无埋点产生的数据指标是 埋点产生的数据指标的 100 倍甚至更多。
无埋点数据采集成本低
埋点采集的优势是可以更加详细的描述每个事件的属性，特别是针对 结果数据。

用无埋点采集的用户行为数据是用户产生最后结果的“前因”数据
用埋点采集的业务数据是结果数据，是“后果”
无埋点和埋点相结合的解决方案 提高了工作效率，同时记录了“前因”和“后果”数据，  
    帮助市场、产品和 运营分析获客、转化和留存，实现用户的快速增长。

迭代分析模式
	基于无埋点全量数据和智能工 具，可以敏捷快速地支持创新迭代。

监控管理模式
	监控的是偏业务的数据
		比如订单量、每天完成 的金额，这些指标都是可以一直复用的，而且对准确性的要求非常高。
		要 我们用「埋点」的方式去做，并进行长期监控。

两个模式之间是流动的，采用无埋点和埋点结合的方式，可以节 省研发投入，帮助我们快速地获取想要的数据，去做监控。
当我们的产品不 断迭代开发，达到一个稳定阶段的时候，就可以用埋点方式获取一些相对固 定的指标，通过这种不断的循环去做接下来的迭代和开发。

## 如何搭建数据指标体系?

### 背景

大部分成长型公司缺少体系化的监控，每天看数据的有多少?在日常工作中 需要监控多少个运营指标?
解决上述问题的思路是给公司搭建一套基于业务 的数据监控体系，数据监控环节离不开一个核心概念——指标。

### 「指标」是一种度量
它用于追踪和评估商业进程的状态，确保项目务在正 确的轨道上运营，同时验证方法论，不断地学习。
指标监控体系最大的价值 就是帮助大家高效利用时间，把时间花在解决问题上，而不是寻找问题上， 从而提高团队整体的人效。

### OSM 模型

O 代表业务目标(Object)
S 代表业务策略(Strategy)
M 代表业务度量(Measure)
		用于衡量我们的策略是否有效，反映目 标的达成情况
		KPI 用来直接衡量策略的有效性
		Target 是预先给出的值，用来判断是否达 到预期。

#### 案例

以「非标住宿」平台为例

* 指标衡量的是什么?
2 种视角
	用户视角 让用户通过搜索高效地找到心仪的住宿产品。
	业务视角 提高从搜索到最后成功下单的转化率。

为了提高这个转化率，我们会采取什么样的策略呢?
	第一，返回与用户搜索值相匹配的搜索结果。
	第二，提供有效的搜索结果排序。
	第三，当搜索没有结果或者结果不足时，我们就要做有效的推荐。
        
* 如何有效衡量“什么”?
第一步，选择合适的 OSM 指标度量。
	针对从搜索到下单的整个流程，可以拆解 2 个 KPI 指标。
    KPI 1 是搜索到 详情页的转化率，我们设置的 Target 是 30%。
    KPI 2 是详情页到下单的转化 率，Target 也是 30%。

第二步，注意结果性指标和过程性指标。
结果性指标 就比如电商场景下的 GMV 或订单量，它通常是业务漏斗的 底部，是一个不可更改的、后验性的指标。
过程性指标 可以简单理解为到 达这个结果之前经过的路径，以及通过这个路径去衡量转化好坏的过程，它 是可干预的，而且通常是“用户行为”。

* 如何衡量指标的好坏?
需要设定 Target 来衡量指标的好坏，这基于我们内部的历史数据和行 业的 benchmark
设定原则是:要对内部有一定的挑战性，但又不是遥 不可及的。

* 如何改善指标的表现?
优化过程指标便可以改善指标的表现。

首先
	问你的领导，我们今年的目标 是什么?我们的产品要达到一个什么样的东西?
其次，我们要关注的是长期 目标和近期目标，并让其相辅相成。

* * 选取目标的原则

DUMB原则
• 切实可行 (Doable)
• 易于理解 (Understandable)
• 可干预可管理 (Manageable)
• 正向的有益的 (Beneficial)

以用户视角和业务视角出发制定的这两个目标，是符合 DUMB 原则的。

* * 避免两个误区
第一个误区，过于模糊
	用户视角的目标就过于模糊，就像哈 姆雷特一样，每个人都有自己心仪的一个东西，它是不可衡量的。
第二个误区，过于保守和激进

#### OSM 模型的看板

猎上网
把 OSM 业务度量模型引入到猎上网的数据分析流程中。
所有业务部门向数据中心提交数据报表或分析的需求，都需要利用模板梳理 需求，分为目标、策略和衡量指标，  
并和数据团队的分析师共同 review 需 求，达成共识后进行数据分析或开发工作。

### 数据指标分级体系
指标分级体系更适合我们的 BI 或者分析师
	能够帮助公司搭建一套完整的数据指标监控体系，从而及时发现业绩 的升高或降低，以及产生的原因。

数据本身是分层的
	我们在思考指标的时候，也应该有一个层级的概念，而 不是现阶段关心什么，我们就放什么
	指标分级可以帮助我们更高效的去定 位问题，去验证你的方法论，无需每次都要思考要去看哪些指标。

#### 三个层级
不一定要拆得太细，否则层级会过 深，基本上 3 个层级就能够指导一线的业务人员去做一些动作。

* 一级指标
一级指标必须是全公司都认可的、衡量业绩的核心指标。

* 二级指标
二级指标是一级指标的路径指标
一级指标发生变化的时候，我们通过查看 二级指标，能够快速定位问题的原因所在。

比如说
一级指标是 GMV 和订单数量上升，那怎样去定二级指标 呢?
在历史经验的基础上去拆解一级指标，而能够影响到 GMV 和订 单数量上升的，就是核心二级指标。
比如说货品的单价上升，或者最近做的 一些活动。

* 三级指标
三级指标是对二级指标的路径的分析
通过三级指标，可以高效定位二级指 标波动的原因，这一步也会基于历史经验和拆解。
三级指标能够直接执行一线运营的角色和作用

以一级指标 GMV 提升为 例
我们拆解后发现是转化率提升，那么转化率就是二级指标。
接着分平台去拆解转化率的时候，我们发现是 IOS 的客户端转化率有所提升。
那为什么安卓没有提升，是不是 iOS 最近做了一些迭代?
	是不是它的一个 转化路径比其他端好?这些思考就能指导业务人员展开行动。

#### GrowingIO 指标体系实践

* 设立
一级指标 增长指标 新用户的注册量
二级指标 活跃指标 DAU ，也就是登陆用户数
三级指标 变现指标 用户从注册到下单，所完成的订单额或营业额。

如果看到一级指标(新的注册用户数)有增长，我们就要迅速去看一下，是 不是有哪些二级指标做了波动，便能快速定位一级指标增长的原因。
有了二 级指标的增长，再通过三级指标拆解二级指标，以此类推，我们便能够解决 日常业务中遇到的 70% 的问题。

## 怎么做用户行为数据分析

通过企业或者平台为目标用户群提供产品或服务，而用户在使用产品或服务 过程中产生的交互、交易，都可以作为数据采集下来。
根据这些数据洞察， 通过分析的手段反推客户的需求，创造更多符合需求的增值产品和服务，重 新投入用户的使用，从而形成一个完整的业务闭环。
这样的完整业务逻辑， 可以真正意义上驱动业务的增长。

### 数据分析两大思路

#### 五个基本步骤

所有商业数据分析 都应该以业务场景为起始思考点，以业务决策作为终点。

```text
第一步，要先挖掘业务含义
	理解数据分析的背景、前提以及想要关联的业 务场景结果是什么。
第二步，需要制定分析计划
	如何对场景拆分，如何推断。
第三步，从分析计划中拆分出需要的数据
	真正落地分析本身。
第四步，从数据结果中，判断提炼出商务洞察。
第五步，根据数据结果洞察，最终产出商业决策。
```

#### 内外因素分解法

在数据分析的过程中，会有很多因素影响到我们的北极星指标，那么如何找 到这些因素呢?
内外因素分解法是把问题 拆成四部分，包括内部因素、外部因素、可控和不可控，然后再一步步解决 每一个问题。

内部可控因素
	产品近期上线更新、市场投放渠道变化、产品粘性、新老用 户留存问题、核心目标的转化。
外部可控因素
	市场竞争对手近期行为、用户使用习惯的变化、招聘需求随 时间的变化。
内部不可控因素
	产品策略(移动端/PC 端)、公司整体战略、公司客户群 定位(比如只做医疗行业招聘)
外部不可控因素
	互联网招聘行业趋势、整体经济形势、季节性变化

### 数据分析的 8 种方法

* 以一个电子商务网站为 例

#### 数字和趋势
	看数字、看趋势是最基础展示数据信息的方式

#### 维度分解
	当单一的数字或趋势过于宏观时，我们需要通过不同的维度对于数据进行分 解，以获取更加精细的数据洞察。

#### 用户分群
	针对符合某种特定行为或背景信息的用户，进行归类处理，是我们常常讲到 的用户分群(segmentation )的手段。
	我们也可以通过提炼某一群用户的 特定信息，创建该群体用户的画像。 

#### 转化漏斗
	绝大部分商业变现的流程，都可以归纳为漏斗
		通过漏斗分 析可以从先到后还原用户转化的路径，分析每一个转化节点的效率。
	关注三个要点
		第一，从开始到结尾，整体的转化效率是多少?
		第二，每一步的转化率是多少?
		第三，哪一步流失最多，原因在什么地方?流失的用户符合哪些特征?
#### 行为轨迹
	关注行为轨迹，是为了真实了解用户行为。
	通过大数据手段，还 原用户的行为轨迹，有助于增长团队关注用户的实际体验、发现具体问题， 根据用户使用习惯设计产品、投放内容。

#### 留存分析
	在人口红利逐渐消褪的时代，留住一个老用户的成本要远远低于获取一个新 用户。
	每一款产品，每一项服务，都应该核心关注用户的留存，确保做实每 一个客户。
	我们可以通过数据分析理解留存情况，也可以通过分析用户行为 或行为组与回访之间的关联，找到提升留存的方法。

#### A/B 测试
	A/B 测试用来对比不同产品设计/算法对结果的影响。
	个必备因素
		第一，有足够的时间进行测试
		第二， 数据量和数据密度较高
			因为当产品流量不够大的时候，做 A/B 测试得到 统计结果是很难的。
#### 数学建模
	当一个商业目标与多种行为、画像等信息有关联性时，我们通常会使用数学 建模、数据挖掘的手段进行建模，预测该商业结果的产生。
	作为一家 SaaS 企业
		当我们需要预测判断客户的流失时，可以通过用户 的行为数据、公司信息、用户画像等数据建立流失模型。
		利用统计学的方式 进行一些组合和权重计算，从而得知用户满足哪些行为之后流失的可能性会 更高。

